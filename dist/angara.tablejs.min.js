!function(a,b){!function(b){"function"==typeof define&&define.amd?define(["jquery","idd","jquery.dataTables","css!jquery.dataTables-css","css!idd-css","css!angara.tablejs"],function(a,c){var d=b({},a,c.InteractiveDataDisplay);return d}):a.jQuery&&a.InteractiveDataDisplay&&(a.TableViewer=b({},a.jQuery,a.InteractiveDataDisplay))}(function(a,c,d){return function(a){a.MathUtils="undefined"==typeof a.MathUtils?{}:a.MathUtils,a.MathUtils.escapeHtml=function(a){var b=typeof a;return null==a||"number"===b||"undefined"===b?a:a.toString().replace(/[\u00A0-\u9999<>\&]/gim,function(a){return"&#"+a.charCodeAt(0)+";"})},a.MathUtils.power10=function(a){if(a>=0){for(var b=1,c=0;a>c;c++)b*=10;return b}for(var b=1,c=0;-a>c;c++)b*=.1;return b},a.MathUtils.getPrintFormat=function(a,b,c){var d=2,e=Math.max(Math.abs(a),Math.abs(b));if(e===1/0||c===1/0||c===-(1/0)||isNaN(e)||isNaN(c))return{toString:function(a){return a}};var f,g=Math.LN10,h=e>1e-12?Math.log(e)/g:0;if(f=c>1e-12?Math.floor(Math.log(c)/g)-d:Math.floor(h-d),0>f){var i=Math.floor(h);if(-2>=f&&-4>=i){var j=this.power10(-i);return{toString:function(a){return(a*j).toFixed(-f+i)},exponent:i}}return{toString:function(a){return a.toFixed(-f)}}}if(f>=2&&h>5){var j=this.power10(-f-d);return{toString:function(a){return(a*j).toFixed(d)},exponent:f+d}}return{toString:function(a){var b=a.toFixed();return a!=b&&(b+="."),b}}}}(a),function(a,b,c,d){a.BoxPlot=function(a,c){this.base=b.CanvasPlot,this.base(a,c);var e,f,g,h,i,j,k,l,m="black";this.draw=function(a){e=a.l95,f=a.r95,g=a.l68,h=a.r68,i=a.median,j=a.min,k=a.max,l=a.height,this.invalidateLocalBounds(),this.requestNextFrameOrUpdate(),this.fireAppearanceChanged()},this.computeLocalBounds=function(){return d},this.getLocalPadding=function(){var a=0;return{left:a,right:a,top:a,bottom:a}},this.renderCore=function(a,b){var c=this.getTransform(),d=c.dataToScreenX,n=c.dataToScreenY,o=this.getContext(!0);o.beginPath(),o.strokeStyle=m;var p=d(j),q=d(k),r=d(g),s=d(e),t=d(h),u=d(f),v=d(i),w=n(0),x=w-l/2,y=w+l/2,z=w-l/6,A=w+l/6,B=5;o.moveTo(s,w),o.lineTo(r,w),o.moveTo(u,w),o.lineTo(t,w),o.moveTo(v,x),o.lineTo(v,y),o.moveTo(s,z),o.lineTo(s,A),o.moveTo(u,z),o.lineTo(u,A),o.stroke(),o.strokeRect(r,x,t-r,l),o.beginPath(),o.arc(p,w,B,0,2*Math.PI),o.stroke(),o.beginPath(),o.arc(q,w,B,0,2*Math.PI),o.stroke()}},a.BoxPlot.prototype=new b.CanvasPlot,c(document).ready(function(){b.register("boxplot",function(b,c){return new a.BoxPlot(b,c)})})}(a,d,c),function(a,b,c,d){a.SelectedCellPlot=function(a,c){this.base=b.CanvasPlot,this.base(a,c);this.draw=function(a){this.x=a.x,this.y=a.y,this.n=a.n,this.requestNextFrameOrUpdate()},this.renderCore=function(a,b){var c=this.getContext(!0);if(this.y>=0&&this.x>=0){c.strokeStyle="black";var d=this.getTransform(),e=(d.dataToScreenX,d.dataToScreenY,d.dataToScreenY(this.y)),f=d.dataToScreenY(this.y+1),g=d.dataToScreenX(this.x),h=d.dataToScreenX(this.x+1);c.strokeRect(g,e,h-g,f-e);var i=this.n;e=d.dataToScreenY(i-this.x-1),f=d.dataToScreenY(i-this.x),g=d.dataToScreenX(i-this.y-1),h=d.dataToScreenX(i-this.y),c.strokeRect(g,e,h-g,f-e)}}},a.SelectedCellPlot.prototype=new b.CanvasPlot,c(document).ready(function(){b.register("selectedCell",function(b,c){return new a.SelectedCellPlot(b,c)})})}(a,d,c),function(a,b,c,d){a.PiesMarker={prepare:function(a){if(a.y==d||null==a.y)throw"The mandatory property 'y' is undefined or null";if(!b.Utils.isArray(a.y))throw"The property 'y' must be an array of numbers";var c=a.y.length,e=new Int8Array(c);if(b.Utils.maskNaN(e,a.y),a.x==d||null==a.x)throw"The mandatory property 'x' is undefined or null";if(!b.Utils.isArray(a.x))throw"The property 'x' must be an array of numbers";if(a.x.length!=c)throw"Length of the array which is a value of the property 'x' differs from lenght of 'y'";if(b.Utils.maskNaN(e,a.x),b.Utils.isArray(a.color)){if(a.color.length!=c)throw"Length of the array 'color' is different than length of the array 'y'";var f=a.colorPalette;if(f!=d&&f.isNormalized){var g=b.Utils.getMinMax(a.color);g=b.Utils.makeNonEqual(g),a.colorPalette=f=f.absolute(g.min,g.max)}for(var h=new Array(c),i=0;c>i;i++){var j=a.color[i];if(j!=j)e[i]=1;else{var k=f.getRgba(j);h[i]="rgba("+k.r+","+k.g+","+k.b+","+k.a+")"}}a.color=h}for(var l=0,i=0;c>i;i++)1===e[i]&&l++;l>0&&(l=c-l,a.x=b.Utils.applyMask(e,a.x,l),a.y=b.Utils.applyMask(e,a.y,l),a.color=b.Utils.applyMask(e,a.color,l))},draw:function(a,b,c,d,e){var f=d.dataToScreenX(a.x),g=d.dataToScreenY(a.y),h=d.dataToScreenX(a.x+a.radius)-f,i=a.value;0==i||0>f+h||f-h>c.width||0>g+h||g-h>c.height||(e.beginPath(),e.strokeStyle="gray",e.fillStyle=a.color,e.moveTo(f,g),e.lineTo(f,g-h),e.arc(f,g,h,-Math.PI/2,Math.PI*(2*i-.5),0>i),e.lineTo(f,g),e.closePath(),e.fill(),e.stroke(),e.beginPath(),e.arc(f,g,h,0,2*Math.PI),e.stroke())},hitTest:function(a,b,c,d){var e=a.radius;return(d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y)<=e*e}}}(a,d,c),function(a,b,c){a.TaskQueue=function(){var a,d=[],e="Task is cancelled",f=function(a){return{func:a,response:b.Deferred(),status:"waiting"}},g=function(){if(a=c,d.length>0){var b=d.shift();k(b)}},h=function(a){a.status="cancelled",a.response.reject(e)},i=function(a,b){"running"==a.status?(a.status="failed",a.response.reject(b)):"cancelling"==a.status&&h(a)},j=function(a,b){"running"==a.status?(a.status="completed",a.response.resolve(b)):"cancelling"==a.status&&h(a)},k=function(b){b.status="running",a=b;try{b.func().done(function(a){g(),j(b,a)}).fail(function(a){g(),i(b,a)})}catch(c){g(),i(b,c)}};return{isRunning:function(){return a!==c},taskCount:function(){return d.length},queue:function(a,b){var e=new f(a,b!==c?1:b);if(this.isRunning()){for(var g=d.length,h=0;g>h;h++)if(d[h].priority>e.priority){d.splice(h,0,e);break}g==d.length&&d.push(e)}else k(e);return e.response.promise()},clear:function(){if(a!==c&&(a.status="cancelling",a=c),d.length>0){for(var b=0;b<d.length;b++)h(d[b]);d.splice(0,d.length)}},cancelStatus:function(){return e}}}}(a,c),function(a){function d(a){for(var c=[],d=0;d<a.summary.length;d++)c.push({name:a.summary[d].name,type:a.summary[d].type});this.totalRows=a.summary&&a.summary.length>0?a.summary[0].totalCount:0,this.columns=c,this.summary=a.summary,this.pdf=a.pdf,this.dataByCols=a.data,this.correlation=a.correlation,this.onChanged=b,this.metadata={}}d.prototype.getDataAsync=function(a,b){var d=c.Deferred(),e=this.dataByCols.map(function(c){return Array.prototype.slice.apply(c,[a,a+b-1])});return d.resolve(e),d.promise()},d.prototype.getSummaryAsync=function(a){var b=c.Deferred();return b.resolve(this.summary[a]),b.promise()},d.prototype.getPdfAsync=function(a){var b=c.Deferred();return this.pdf&&this.pdf.length>a?b.resolve(this.pdf[a]):b.reject("no data"),b.promise()},d.prototype.getCorrelationAsync=function(){var a=c.Deferred();return a.resolve(this.correlation),a.promise()},d.prototype.saveAttribute=function(a,b){this.metadata[a]=b},d.prototype.getAttributeAsync=function(a){var b=c.Deferred();return b.resolve(this.metadata[a]),b.promise()},d.prototype.cancelRequests=function(){},a.TableSource=d}(a),function(a){var b=function(){function a(a,b,c,d){this.number=a,this.name=b,this.type=c,this.table=d}return a.prototype.getSummaryAsync=function(){return this.table.getSummaryAsync(this.number)},a.prototype.getPdfAsync=function(){return this.table.getPdfAsync(this.number)},a}(),c=function(){function a(a){this.table=a,this.columns=[];var b=this;a.onChanged=function(a){"schema"==a.changeType?b.updateColumns():b.columns.forEach(function(a){a.onChanged&&a.onChanged()}),b.onColumnsChanged&&b.onColumnsChanged(a)},this.updateColumns()}return a.prototype.updateColumns=function(){var a=this;this.columns=this.table.columns.map(function(c,d){return new b(d,c.name,c.type,a)})},Object.defineProperty(a.prototype,"totalRows",{get:function(){return this.table.totalRows},enumerable:!0,configurable:!0}),a.prototype.getDataAsync=function(a,b){return this.table.getDataAsync(a,b)},a.prototype.getSummaryAsync=function(a){return this.table.getSummaryAsync(a)},a.prototype.getPdfAsync=function(a){return this.table.getPdfAsync(a)},a.prototype.getCorrelationAsync=function(){return this.table.getCorrelationAsync()},a.prototype.saveAttribute=function(a,b){this.table.saveAttribute(a,b)},a.prototype.getAttribute=function(a){return this.table.getAttributeAsync(a)},a.prototype.saveView=function(a){this.saveAttribute("$view",a)},a.prototype.getView=function(){return this.getAttributeAsync("$view")},a.prototype.cancelAllRequests=function(){this.table.cancelRequests()},a}();a.TableViewModel=c}(a),function(a,b,c){var e=function(a){return 0==a.indexOf("System.")&&(a=a.substr(7)),a=a.toLowerCase(),"real"===a?a="float":"int32"===a&&(a="int"),a};a.TableTile=function(f,g){var h=b(f),i=null,j=null,k=null;d.Padding=2,d.tickLength=5,h.bind("mouseenter."+name,function(){mouseOverBox=!0}).bind("mouseleave."+name,function(){mouseOverBox=!1}),h.html("<div class='table-tile'><div class='header'><div class='name'>Name</div><div class='rightContainer'><span class='type'></span></div></div><div style='position: relative;'><div class='content-chart' style='position: absolute'><div class='chart' data-idd-plot='figure'><div data-idd-axis='numeric' data-idd-placement='bottom' /></div><div class='boxplot' data-idd-plot='boxplot' data-idd-style='stroke: rgb(89,150,255); thickness: 1'></div></div><div class='content-summary' style='position: absolute'><div class='summary-numeric'><span>min/max:</span>&nbsp;<span class='minmax'></span><span class='minmax-exp'></span></div><div class='summary-numeric'><span>lb95/ub95:</span>&nbsp;<span class='b95'></span><span class='b95-exp'></span></div><div class='summary-numeric'><span>lb68/ub68:</span>&nbsp;<span class='b68'></span><span class='b68-exp'></span></div><div class='summary-numeric'><span>mean/std:</span>&nbsp;<span class='meanstd'></span><span class='meanstd-exp'></span></div><div class='summary-numeric'><span>median:</span>&nbsp;<span class='median'></span><span class='median-exp'></span></div><div class='summary-nonnumeric'></div></div></div></div>");var l=h.find(".content-chart"),i=d.asPlot(l.find(".chart")),m=i,n=b("<div></div>").attr("data-idd-name","bplot").attr("data-idd-plot","area").appendTo(m.host),o=new d.Area(n,m.master);m.addChild(o),j=o,k=d.asPlot(l.find(".boxplot")),i.navigation.setVisibleRect({x:0,y:0,width:1,height:1}),k.navigation.setVisibleRect({x:0,y:-.5,width:1,height:1}),i.navigation.gestureSource=c;var p=function(c){var d=e(g.type);if(d="bool"==g.type?d+"["+(c["true"]+c["false"])+"]":d+"["+(c.totalCount===c.count?c.totalCount:c.totalCount+"<span class='notImportantText'>/"+c.count+"</span>")+"]",h.find(".type").html(d),"bool"==g.type)b(".summary-numeric",h).css("display","none"),b(".summary-nonnumeric",h).css("display","block"),h.find(".summary-nonnumeric").html("<div>true:"+c["true"]+"</div><div>false:"+c["false"]+"</div>"),i.isVisible&&(k.isVisible=!1,i.isVisible=!1,l.css("display","none"));else if("undefined"==typeof c.min)b(".summary-numeric",h).css("display","none"),b(".summary-nonnumeric",h).css("display","none"),i.isVisible&&(k.isVisible=!1,i.isVisible=!1,l.css("display","none"));else if("undefined"==typeof c.variance)b(".summary-numeric",h).css("display","none"),b(".summary-nonnumeric",h).css("display","block"),1==c.totalCount?h.find(".summary-nonnumeric").html("<div>"+c.min+"</div>"):2==c.totalCount&&h.find(".summary-nonnumeric").html("<div>"+c.min+"</div><div>"+c.max+"</div>"),c.totalCount>2&&h.find(".summary-nonnumeric").html("<div>"+c.min+"</div><div>...</div><div>"+c.max+"</div>"),i.isVisible&&(k.isVisible=!1,i.isVisible=!1,l.css("display","none"));else{b(".summary-numeric",h).css("display","block"),b(".summary-nonnumeric",h).css("display","none");var f=Math.sqrt(c.variance),j=a.MathUtils.getPrintFormat(c.min,c.max,f),m=j.toString;h.find(".minmax").html(m(c.min)+"/"+m(c.max)),h.find(".meanstd").html(m(c.mean)+"/"+m(f)),h.find(".median").html(m(c.median)),h.find(".b68").html(m(c.lb68)+"/"+m(c.ub68)),h.find(".b95").html(m(c.lb95)+"/"+m(c.ub95)),j.exponent&&(h.find(".minmax-exp").html("×10<sup>"+j.exponent+"</sup>"),h.find(".meanstd-exp").html("×10<sup>"+j.exponent+"</sup>"),h.find(".median-exp").html("×10<sup>"+j.exponent+"</sup>"),h.find(".b68-exp").html("×10<sup>"+j.exponent+"</sup>"),h.find(".b95-exp").html("×10<sup>"+j.exponent+"</sup>"));var n=c.max-c.min;i.isVisible||(l.css("display","block"),k.isVisible=!0,i.isVisible=!0);var o=15;k.draw({min:c.min,l95:c.lb95,l68:c.lb68,median:c.median,r68:c.ub68,r95:c.ub95,max:c.max,y:0,height:o}),0==n&&(n=1);var p=c.min-n/10,q=c.max+n/10,r=i.visibleRect;i.navigation.setVisibleRect({x:p,y:r.y,width:q-p,height:r.height}),k.navigation.setVisibleRect({x:p,y:-.5,width:q-p,height:1})}},q=function(a){if(a){var b={};if(b.fill="#E8F3FF","undefined"==typeof a.x||"undefined"==typeof a.f)b.y1=[],b.y2=[],b.x=[],j.draw(b);else{for(var c=new Array(a.x.length),d=0;d<c.length;d++)c[d]=0;b.y1=c,b.y2=a.f,b.x=a.x,j.draw(b)}i.fitToViewY()}},r=function(){g.getSummaryAsync().done(function(a){p(a),g.getPdfAsync().done(function(a){q(a)}).fail(function(a){})}).fail(function(a){})};return g.onChanged=function(){r()},h.find(".name").text(g.name),h.find(".type").text(e(g.type)+"[]"),r(),{dispose:function(){h.empty(),g.onChanged=c,g=c}}}}(a,c),function(a,b,c){a.showSummary=function(d,e){var f=new a.TableViewModel(e),g=b(d),h=[];g.empty().addClass("table-tileView").bind("mouseenter."+name,function(){mouseOverBox=!0}).bind("mouseleave."+name,function(){mouseOverBox=!1});var i=b("<div></div>").appendTo(g).addClass("table-tileView-panel"),j=b("<ul></ul>").appendTo(i),k=function(){var c=j;if(c.empty(),f&&f.columns){var d=f.columns,e=function(a,b){a.bind("click",function(c){a.trigger("tileSelected",b.name)})};h=[];for(var g=d.length,i=0;g>i;i++){var k=d[i],l=b("<li></li>").appendTo(c),m=b("<div></div>").appendTo(l),n=a.TableTile(m,k);h.push(n),e(m,k)}}};return f.onColumnsChanged=function(a){"schema"===a.changeType&&k()},k(),{dispose:function(){h.forEach(function(a){a.dispose()}),g.empty().removeClass("table-tileView"),f.onColumnsChanged=c,f=c,options=c}}}}(a,c),function(a,b,c){b.fn.scrollView=function(){return each(function(){b("html, body").animate({scrollLeft:b(this).offset().left},1e3)})},b.fn.dataTableExt.oPagination.four_button={fnInit:function(a,c,d){var e=document.createElement("span"),f=document.createElement("span"),g=document.createElement("span"),h=document.createElement("span");e.appendChild(document.createTextNode(a.oLanguage.oPaginate.sFirst)),f.appendChild(document.createTextNode(a.oLanguage.oPaginate.sPrevious)),g.appendChild(document.createTextNode(a.oLanguage.oPaginate.sNext)),h.appendChild(document.createTextNode(a.oLanguage.oPaginate.sLast)),e.className="paginate_button first",f.className="paginate_button previous",g.className="paginate_button next",h.className="paginate_button last",c.appendChild(e),c.appendChild(f),c.appendChild(g),c.appendChild(h),b(e).click(function(){a.oApi._fnPageChange(a,"first"),d(a)}),b(f).click(function(){a.oApi._fnPageChange(a,"previous"),d(a)}),b(g).click(function(){a.oApi._fnPageChange(a,"next"),d(a)}),b(h).click(function(){a.oApi._fnPageChange(a,"last"),d(a)}),b(e).bind("selectstart",function(){return!1}),b(f).bind("selectstart",function(){return!1}),b(g).bind("selectstart",function(){return!1}),b(h).bind("selectstart",function(){return!1})},fnUpdate:function(a,b){if(a.aanFeatures.p)for(var c=a.aanFeatures.p,d=0,e=c.length;e>d;d++){var f=c[d].getElementsByTagName("span");0===a._iDisplayStart?(f[0].className="paginate_disabled_previous",f[1].className="paginate_disabled_previous"):(f[0].className="paginate_enabled_previous",f[1].className="paginate_enabled_previous"),a.fnDisplayEnd()==a.fnRecordsDisplay()?(f[2].className="paginate_disabled_next",f[3].className="paginate_disabled_next"):(f[2].className="paginate_enabled_next",f[3].className="paginate_enabled_next")}}},a.showGrid=function(d,e,f){var g=new a.TableViewModel(e),h=b(d),i=null,j=[],k=!0;h.empty().addClass("table-tableView").bind("mouseenter."+name,function(){mouseOverBox=!0}).bind("mouseleave."+name,function(){mouseOverBox=!1});var l=b("<div></div>").appendTo(h).addClass("table-tableView-panel"),m=function(b,c,d,e){var f=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c].name==b)return a[c].value;return null},h=f(c,"iDisplayStart"),i=f(c,"iDisplayLength"),j=f(c,"sEcho");g.getDataAsync(h,i).done(function(b){var c=b,e=g.totalRows,f=[];for(var h in c)f.push(c[h]);for(var i=f.length,k=f[i-1].length,l=new Array(k),m={sEcho:j,iTotalRecords:e,iTotalDisplayRecords:e,aaData:l},n=0;k>n;n++){for(var o=new Array(i),p=0;i>p;p++)o[p]=a.MathUtils.escapeHtml(f[p][n]);l[n]=o}d(m)}).fail(function(){alert("table data request failed")})},n=function(){if(i){var c=l.find(".round_btn");c[0].className="round_btn auto_format_on",c[0].title="Auto format is ON",k=!0;for(var d=j,e=function(c,e,f,g){c.getSummaryAsync(e).done(function(c){if("undefined"!=typeof c.min&&"undefined"!=typeof c.max&&"undefined"!=typeof c.variance){var h=a.MathUtils.getPrintFormat(c.min,c.max,Math.sqrt(c.variance));d[e]=h;var i=b("th:nth-child("+(e+1)+")",g);if(i.length){var j=o(f,h);i.html(j)}g.fnDraw(!1)}})},f=g.columns.length,h=0;f>h;h++){var m=g.columns[h].name,n=g.columns[h].type;"System.String"!=n&&"System.DateTime"!=n&&e(g,h,m,i)}}},o=function(a,c){var d=b("<span></span>");return b("<span></span>").appendTo(d).text(a),c&&c.exponent&&b("<span class='headerExponent'>×10<sup><small>"+c.exponent+"</small></sup></span>").appendTo(d),d},p=function(){if(i){var a=l.find(".round_btn");a[0].className="round_btn auto_format_off",a[0].title="Auto format is OFF",k=!1,b(".headerExponent",i).remove(),i.fnDraw(!1)}},q=function(a,d){l.empty(),panel_table=b("<table cellpadding='0' cellspacing='0' border='0'></table>").appendTo(l);var e=panel_table;if(g&&g.columns&&g.columns.length>0){var f,h=g.columns,q=b("<thead></thead>").appendTo(e),r=b("<tr></tr>").appendTo(q),s=g.columns.length;f="schema"!=d&&j?j:j=new Array(s);for(var t=new Array(s),u=function(b,d){t[b]={sClass:a&&a==d?"active":c,mData:function(a,c,d){if("set"!==c){if("display"===c){var d=a[b],e=f[b];return k&&d&&e?e.toString(d):d}return a[b]}}}},v=0;s>v;v++){var w=f[v],x=b("<th></th>").appendTo(r),y=h[v].name,z=o(y,w);x.html(z),a&&a==h[v].name&&x.scrollView(),u(v,h[v].name)}var A=b("<tbody></tbody>").appendTo(e);i=e.dataTable({bFilter:!1,bSort:!1,bAutoWidth:!0,bSortClasses:!1,bProcessing:!0,bServerSide:!0,sAjaxSource:"-na-",sDom:'l<"toolbar">fr<t><ip>',sPaginationType:"four_button",fnServerData:function(a,b,c,d){m(a,b,c,d)},bStateSave:!0,fnStateSave:function(a,b){var c={start:b.iStart,length:b.iLength};g.saveAttribute("$view-table",JSON.stringify(c))},aoColumns:t,iDisplayLength:tableSettings.length||10,iDisplayStart:tableSettings.start||0,oLanguage:{oPaginate:{sFirst:"first",sLast:"last",sNext:"next",sPrevious:"previous"},sEmptyTable:"no data available in table",sInfo:"showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"showing 0 to 0 of 0 entries",sLengthMenu:"show _MENU_ entries",sLoadingRecords:"loading...",sProcessing:"processing..."}}),A.on("mouseenter","td",function(){var a=b("td",this.parentNode).index(this);b("td:nth-child("+(a+1)+")",i.$("tr")).addClass("highlighted")}),A.on("mouseleave","td",function(){i.$("td.highlighted").removeClass("highlighted")});var B=b("div.toolbar").html('<span class="round_btn"></span>').find(".round_btn");B.css("background-size","contain"),B.click(function(a){k?p():n()}),k?n():p()}};return g.getAttribute("$view-table").done(function(a){try{tableSettings=a?JSON.parse(a):{}}catch(b){tableSettings={}}g.onColumnsChanged=function(a){q(null,a.changeType)},q(f,"schema")}),{dispose:function(){h.empty().removeClass("table-tableView"),g.onColumnsChanged=c,g=c,options=c}}}}(a,c),function(a,b,c){b.fn.scrollView=function(){return this.each(function(){b("html, body").animate({scrollLeft:b(this).offset().left},1e3)})},a.showCorrelations=function(e,f){var g=new a.TableViewModel(f),h=b(e),i=null,j=null,k=0,l=null,m={i:-1,j:-1,isInverted:!1},n=d.ColorPalette.parse("-1=Red,White=0,Blue=1"),o=0;h.empty().addClass("table-correlationView");var p=b("<div style='display:none'></div>");h.append(p);var q=b("<div class='message'></div>");h.append(q);var r=b("<div class='figure' data-idd-plot='figure'></div>");r.html('<div data-idd-plot="heatmap" data-idd-name="Correlation" data-idd-style="palette:-1=Red,White=0,Blue=1"></div><div data-idd-plot="grid" data-idd-name="grid" data-idd-placement="center" data-idd-style="stroke: DarkGray; thickness: 1px"></div><div data-idd-plot="selectedCell" data-idd-name="selectedCell" data-idd-placement="center"></div><div data-idd-plot="markers" data-idd-name="pies" data-idd-placement="center"></div>'),p.append(r);var s=d.asPlot(r);s.isToolTipEnabled=!1,s.navigation.gestureSource=d.Gestures.getGesturesStream(r);var t=b("<div class='legend'></div>");p.append(t);var u=s.get("Correlation");u.legend=new d.Legend(u,t),p.append(b("<div class='legendHint hint'>click on a cell to see details here</div><div class='selectedPair' style='display:none;'>Pearson's correlation coefficient between <span class='selectedPair1 highlighted'></span> and <span class='selectedPair2 highlighted'></span> is <span class='selectedPair-PCC highlighted'></span>.</div>"));var v=function(a,b,c){m={i:a,j:b,isInverted:c};var d=s.get("selectedCell");if(a>=0&&b>=0&&g&&l&&k>0){var e=k;if(c&&(b=e-1-b),a!=b&&e>a&&e>b&&a>=0&&b>=0){c?d.draw({x:a,y:e-1-b,n:e}):d.draw({x:a,y:b,n:e});var f=g.columns[a].name,i=g.columns[b].name;if(h.find(".selectedPair2").text(f),h.find(".selectedPair1").text(i),a>b){var j=a;a=b,b=j}return h.find(".selectedPair-PCC").text(l[a][b-a-1].toFixed(4)),h.find(".selectedPair").css("display","block"),void h.find(".legendHint").css("display","none")}}h.find(".selectedPair").css("display","none"),h.find(".legendHint").css("display","block"),d.draw({x:-1,y:-1})},w=function(b){l=null;var c=g.columns;if(c&&c.length>0){var e=++o;q.css("display","block").text("processing...").addClass("hint").removeClass("error"),g.getCorrelationAsync().done(function(c){if(e==o){if(!c||!c.r||!c.c)return k=0,p.css("display","none"),void q.css("display","block").text("there is nothing to display").addClass("hint").removeClass("error");q.css("display","none");var f=c.r;l=c.r;var g=s.get("Correlation"),h=s.get("pies"),r=Object.keys(f).length+1;if(k=r,2>r)p.css("display","none");else{p.css("display","block");for(var t=new Array(r+1),u=new Array(r),w=new Array(r*(r-1)/2),x=new Array(r*(r-1)/2),y=new Array(r*(r-1)/2),z=0;r>z;z++)for(var A=u[z]=new Array(r),B=f[z],C=0;r>C;C++)z==C?A[r-1-C]=0:C>z?A[r-1-C]=0:A[r-1-C]=f[C][z-C-1],C>z&&(y[z*r+C]=B[C-z-1],w[z*r+C]=z+.5,x[z*r+C]=r-1-C+.5);for(var z=0;r>=z;z++)t[z]=z;if(g.draw({x:t,y:t,values:u,colorPalette:n}),h.draw({x:w,y:x,value:y,color:y,colorPalette:n,radius:.45,shape:a.PiesMarker}),b){for(var D=new Array(r),E=new Array(r),z=0;r>z;z++){var F=a.MathUtils.escapeHtml(c.c[z]);D[z]="<div class='vert-axis-item' title='"+F+"'>"+F+"</div>",E[z]="<div class='horz-axis-item-container'><div class='horz-axis-item' title='"+F+"'>"+F+"</div></div>"}i&&i.axis.remove(),i=s.addAxis("left","labels",{labels:D,ticks:t,rotate:!1}),j&&j.axis.remove(),j=s.addAxis("top","labels",{labels:E,ticks:t,rotate:!1});var G=s.get("grid");G.xAxis=j.axis,G.yAxis=i.axis,i.axis.dataTransform=new d.DataTransform(function(a){return r-a},function(a){return r-a}),v(-1,-1),s.fitToView()}else v(m.i,m.j,m.isInverted)}}}).fail(function(a){k=0,p.css("display","none"),q.css("display","block").text("Error: "+a).addClass("error").removeClass("hint")})}};return g.onColumnsChanged=function(a){w("schema"===a.changeType)},w(!0),u.onClick=function(a,b){v(Math.floor(b.x),Math.floor(b.y),!0)},{dispose:function(){h.empty().removeClass("table-correlationView"),g.onColumnsChanged=c,s=c,options=c}}}}(a,c),function(a,c){a.show=function(d,e){var f;f="undefined"!=typeof e.getDataAsync?e:new a.TableSource(e);var g=c(d);g.html("<div style='margin-top: 10px; border-bottom: 1px solid #808080; padding-bottom: 10px;'><span class='summary titleCommand-on'>summary</span><span class='data titleCommand'>data</span><span class='correlation titleCommand'>correlation</span></div><div class='tableviewer_container'>Initializing...</div>");var h=g.find(".tableviewer_container");g.find(".summary").click(function(){l()}),g.find(".data").click(function(){m()}),g.find(".correlation").click(function(){n()});var i,j=b,k=function(){i&&(i(),i=b);var a=g.find(".titleCommand, .titleCommand-on"),c=a.filter("."+j),d=a.filter(":not(."+j+")");c.addClass("titleCommand-on").removeClass("titleCommand"),d.addClass("titleCommand").removeClass("titleCommand-on")},l=function(){"summary"!=j&&(j="summary",k(),o())},m=function(a){"data"!=j&&(j="data",k(),p(a))},n=function(){"correlation"!=j&&(j="correlation",k(),q())},o=function(){f.cancelRequests();var b=a.showSummary(h,f);f.saveAttribute("$view","tiles"),i=function(){h.is(".table-tileView")&&b.dispose()},h.on("tileSelected",function(a,b){m(b)})},p=function(b){f.cancelRequests();var c=a.showGrid(h,f,b);f.saveAttribute("$view","table"),i=function(){h.is(".table-tableView")&&c.dispose()}},q=function(){f.cancelRequests();var b=a.showCorrelations(h,f);f.saveAttribute("$view","correlation"),i=function(){h.is(".table-correlationView")&&b.dispose()}};return l(),{dispose:function(){i&&i(),g.html("")}}}}(a,c),a})}(window);
//# sourceMappingURL=angara.tablejs.min.js.map